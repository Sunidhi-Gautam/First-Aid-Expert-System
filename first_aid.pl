% --- Symptom aliases ---
symptom_alias('cuts', ['cut', 'open wound', 'bleeding cut']).
symptom_alias('abrasions', ['scrape', 'grazing', 'skin abrasion', 'abrasion']).
symptom_alias('stings', ['sting', 'bee sting', 'insect sting']).
symptom_alias('splinter', ['splinter stuck', 'embedded splinter']).
symptom_alias('sprains', ['twisted ankle', 'sprained joint']).
symptom_alias('strains', ['pulled muscle', 'muscle strain']).
symptom_alias('fever', ['mild fever', 'temperature rise']).
symptom_alias('nasal congestion', ['blocked nose', 'stuffy nose']).
symptom_alias('cough', ['dry cough', 'wet cough', 'persistent cough']).
symptom_alias('sore throat', ['throat pain', 'inflamed throat', 'sore throat']).
symptom_alias('gastrointestinal problems', ['gas problems', 'stomach upset']).
symptom_alias('skin problems', ['skin allergy', 'rash', 'itchy skin']).
symptom_alias('abdominal pain', ['stomach pain', 'belly ache']).
symptom_alias('bruises', ['blue mark', 'contusion']).
symptom_alias('broken toe', ['fractured toe', 'toe injury']).
symptom_alias('choking', ['airway blockage', 'cannot breathe']).
symptom_alias('wound', ['injury', 'skin wound']).
symptom_alias('diarrhea', ['loose motion', 'frequent stool']).
symptom_alias('frost bite', ['frozen skin', 'cold injury']).
symptom_alias('heat exhaustion', ['heat fatigue', 'overheating']).
symptom_alias('heat stroke', ['sunstroke', 'severe overheating']).
symptom_alias('insect bites', ['bug bite', 'mosquito bite']).
symptom_alias('nose bleed', ['bleeding nose', 'epistaxis']).
symptom_alias('pulled muscle', ['muscle pull', 'muscle strain']).
symptom_alias('rectal bleeding', ['bleeding from rectum']).
symptom_alias('sun burn', ['sunburned skin', 'skin burn from sun', 'sunburn', 'burn', 'sun']).
symptom_alias('testicle pain', ['scrotal pain', 'testicular ache']).
symptom_alias('vertigo', ['dizziness', 'spinning sensation']).
symptom_alias('normal bleeding', ['minor bleeding']).
symptom_alias('eye injury', ['injured eye', 'eye trauma']).
symptom_alias('chemical burn', ['acid burn', 'chemical exposure injury', 'chemical burn', 'burn']).
symptom_alias('poison', ['poisoning', 'toxic ingestion']).
symptom_alias('teeth', ['broken tooth', 'chipped teeth']).
symptom_alias('seizure', ['convulsion', 'fit']).
symptom_alias('head injury', ['brain injury', 'head trauma']).
symptom_alias('fainting', ['syncope', 'passing out']).
symptom_alias('headache', ['head pain', 'migraine', 'throbbing head']).
symptom_alias('cold', ['common cold', 'flu symptoms']).
symptom_alias('rash', ['skin rash', 'red itchy patch']).
symptom_alias('snake bite', ['venomous bite', 'snake wound']).
symptom_alias('animal bite', ['dog bite', 'monkey bite', 'cat bite']).
symptom_alias('drowning', ['near drowning', 'submerged']).
symptom_alias('cpr', ['cardiac massage', 'resuscitation']).
symptom_alias('fracture', ['broken bone', 'cracked bone']).

% --- First aid advice ---
first_aid_advice('cuts', 'Wash the cut properly, apply pressure to stop bleeding, use petroleum jelly, and cover with a sterile bandage. Watch: https://youtu.be/9XpJZv_YsGM').
first_aid_advice('abrasions', 'Gently clean the area, remove dirt, apply antibiotic ointment, and cover with a bandage. Watch: https://youtube.com/shorts/ZW4nevby_DY?si=M7UjxG-BMbdgW2Vo').
first_aid_advice('stings', 'Remove the stinger, apply ice, take antihistamines for swelling, and use hydrocortisone cream. Watch: https://youtu.be/lE5KA6Tb_jU?si=nOA18Klult325iXN').
first_aid_advice('splinter', 'Soak in Epsom salts or vinegar to bring the splinter to the surface, then remove carefully. Watch: https://youtu.be/MKZf8hoqWFE?si=qAdW8zDgBjkDAITR').
first_aid_advice('sprains', 'Apply ice, compress with a bandage, elevate the area, and use pain relievers. Watch: https://youtu.be/BZMD3cfyjVI?si=5tkDTxiDvqVtTDq1').
first_aid_advice('strains', 'Rest the muscle, apply ice, compress the area, and elevate to reduce swelling. Watch: https://youtu.be/yrvqNh2q6Tc?si=HtRLxkhBVfMqjsh6').
first_aid_advice('fever', 'Drink fluids, wear lightweight clothing, use a light blanket, and take acetaminophen or ibuprofen. Watch: https://youtu.be/s_C8KK_YR3Q?si=tUiiuzhL_gQZdWpo').
first_aid_advice('nasal congestion', 'Use humidifiers, drink fluids, and apply a warm compress on the face. Watch: https://youtube.com/shorts/I4SjE81CHOY?si=qxMjJ00zXqOh9XIx').
first_aid_advice('cough', 'Use honey with warm water or tea, stay hydrated, and take ginger tea if needed. Watch: https://youtu.be/NqEVOcFU4bE?si=k2s1cfMD4HSxOZZp').
first_aid_advice('sore throat', 'Rest, drink warm fluids, inhale steam, and avoid irritants. Watch: https://youtu.be/xaBZmiK68GE?si=iKb9vVMCrYcHdne1').
first_aid_advice('gastrointestinal problems', 'Replenish fluids, avoid self-medication, and seek medical help if symptoms persist. Watch: https://youtube.com/shorts/d65i62OstrQ?si=62JcanMMGpHL-OGV').
first_aid_advice('skin problems', 'Use hydrocortisone cream, calamine lotion, and antihistamines; consult a doctor if needed. Watch: https://youtube.com/shorts/4OQfLeJZYhk?si=dAs2MhzBdCEDXHm5').
first_aid_advice('abdominal pain', 'Sip clear fluids, eat bland foods, avoid spicy or greasy foods. Watch: https://youtube.com/shorts/QE9vQOm7wpw?si=Ti4fIYpgyKWKx9iY').
first_aid_advice('bruises', 'Apply ice wrapped in a towel, rest the area, and compress if swelling occurs. Watch: https://youtube.com/shorts/SShpCffV6Vo?si=dBLd8WVyrk6GCaC7').
first_aid_advice('broken toe', 'Elevate the foot, apply ice, stay off the foot, and seek medical care if severe. Watch: https://youtu.be/3CVtsURcmBg?si=uAVP4DnYTNBFpUB0').
first_aid_advice('choking', 'Encourage coughing; if ineffective, perform back blows and abdominal thrusts. Watch: https://youtube.com/shorts/35lQQp8OZ0c?si=_lnYfUUIDF_Kj2gs').
first_aid_advice('wound', 'Clean the wound, apply pressure to stop bleeding, and cover with a bandage. Watch: https://youtu.be/U1ozOeiXoso?si=4_9AvoiC5w--kxIn').
first_aid_advice('diarrhea', 'Hydrate well, avoid dairy, and consult a doctor if diarrhea persists more than 2 days. Watch: https://youtube.com/shorts/2lC9MqA7XbY?si=NwCXijR4mvF1sH2q').
first_aid_advice('frost bite', 'Move to a warm area and gradually rewarm the affected skin. Watch: https://youtu.be/tPEj-0sKZyo?si=ZiHZfHYNvd7xNGMz').
first_aid_advice('heat exhaustion', 'Rest in a cool place, drink fluids, and seek medical attention if symptoms worsen. Watch: https://youtu.be/R6VdoV8dZRc?si=2aFwl-kbyVH4WEv6').
first_aid_advice('heat stroke', 'Cool the body immediately and seek emergency medical help. Watch: https://youtube.com/shorts/VO-51DnkTFU?si=HTTP4zLSd5s23mY7').
first_aid_advice('insect bites', 'Wash the bite area, apply ice, and use antihistamines for itching. Watch: https://youtu.be/wFdn8vMioio?si=ikF-HJ8jTK96NBYY').
first_aid_advice('nose bleed', 'Sit upright, lean forward slightly, and pinch the nose for several minutes. Watch: https://youtube.com/shorts/5l7RD2j3JRQ?si=-5cdCcxdK7nyk03g').
first_aid_advice('pulled muscle', 'Rest the affected muscle, ice it, and apply a compression bandage. Watch: https://youtu.be/nvG5VgLN2IM?si=ZUChZmat5o6eLpaJ').
first_aid_advice('rectal bleeding', 'Seek medical evaluation, especially if bleeding persists. Watch: https://youtu.be/pf4lnkBDzhU?si=2zOrr3BPUsCxVC9W').
first_aid_advice('sun burn', 'Apply aloe vera or moisturizer, avoid sun exposure, and drink fluids. Watch: https://youtube.com/shorts/ltv0m18V5Ys?si=TT90hn8EtFPugnLx').
first_aid_advice('testicle pain', 'Seek prompt medical advice for diagnosis and treatment. Watch: https://youtube.com/shorts/8WHQEidlP14?si=MOHRY4hnclTEzu_l').
first_aid_advice('vertigo', 'Lie down in a dark, quiet place and avoid sudden movements. Watch: https://youtu.be/xv3MfTApvtc?si=aIRv3dshXIj2RmKg').
first_aid_advice('normal bleeding', 'Apply firm pressure to stop bleeding and clean the wound. Watch: https://youtube.com/shorts/Il1JRDhpjxI?si=oWYP-EQ-dGP4gWSF').
first_aid_advice('eye injury', 'Do not rub the eye; cover it lightly and seek immediate medical help. Watch: https://youtu.be/hK98f73Bmuo?si=gd8igaU7AZFi8Y0_').
first_aid_advice('chemical burn', 'Flush the affected area with water for at least 20 minutes and seek emergency help. Watch: https://youtu.be/SUiidFtEcjk?si=_bAhEZaBTRRJMapZ').
first_aid_advice('poison', 'Call poison control or emergency services immediately. Watch: https://youtu.be/bMWCOeTfOLU?si=q8_gfhXkzbgwAd-R').
first_aid_advice('teeth', 'Rinse mouth gently, keep broken tooth moist, and visit a dentist quickly. Watch: https://youtube.com/shorts/dJb9zIZuay8?si=t5KleTXU6klBl6Ih').
first_aid_advice('seizure', 'Protect from injury, cushion the head, and do not restrain the person. Watch: https://youtube.com/shorts/GDW-EgWjyEE?si=Nxy1Pj27mTtUAHt1').
first_aid_advice('head injury', 'Apply a cold pack, monitor for serious symptoms, and seek medical help if needed. Watch: https://youtu.be/2ct6P2kpknc?si=2Qon1wSL6L2ge8-T').
first_aid_advice('fainting', 'Lay the person flat and elevate the legs to improve blood flow. Watch: https://youtu.be/Npo9p30jSdk?si=NCCmXHOqTFjMXlSw').
first_aid_advice('headache', 'Rest in a quiet room, take pain relievers if necessary, and stay hydrated. Watch: https://youtube.com/shorts/_IfbUjoFdkk?si=Y7fM904qKTo1QqUu').
first_aid_advice('cold', 'Stay hydrated, boost Vitamin C and D intake, and rest adequately. Watch: https://youtube.com/shorts/Swmrd-lCdEo?si=dXKFfb2TMxb4TQsM').
first_aid_advice('rash', 'Apply olive oil, baking soda paste, or aloe vera to soothe and heal the rash. Watch: https://youtu.be/SIVZSPXzPwI?si=FjJaTv14grIUh7de').
first_aid_advice('snake bite', 'Move away from the snake, keep calm, keep the bite below heart level, and seek emergency help. Watch:https://youtu.be/1zP9bMv78D4?si=qLrOyTTm7zrUoR4B').
first_aid_advice('animal bite', 'Clean the wound thoroughly, apply antibiotic ointment, and seek medical care for rabies risk. Watch: https://youtu.be/hmBNlUPPmrQ?si=Id3LPzVWuC1nX2Dy').
first_aid_advice('drowning', 'Check breathing and pulse, start CPR if necessary, and call for emergency help. Watch: https://youtu.be/WKu7_Fwf3PI?si=TB8QPvY8XjwJITDd').
first_aid_advice('cpr', 'Provide chest compressions at 100 â€“ 120 per minute, and give rescue breaths if trained. Watch: https://youtube.com/shorts/9HeRaGW3fyo?si=iPGx4ajaMrI3uICI').
first_aid_advice('fracture', 'Immobilize the area, apply ice, and seek urgent medical care. Watch: https://youtu.be/l4GXVkf8JjY?si=JwE3CpxOg9lE3lBQ').

% --- Normalize symptom based on input ---
% --- Normalize symptom based on input ---
normalize_symptom(Input, Symptom) :-
    string_lower(Input, LowerInput),
    symptom_alias(Symptom, Aliases),
    member(Alias, Aliases),
    string_lower(Alias, LowerAlias),
    LowerInput = LowerAlias,  % exact match only
    !.
normalize_symptom(Input, Input).


% --- Disclaimer ---
first_aid_with_disclaimer(Symptom, FullAdvice) :-
    first_aid_advice(Symptom, Advice),
    atom_concat(Advice, ' This is for first aid purposes only. Please seek professional medical advice.', FullAdvice).

% --- Process user inputs to generate advice ---
process_user_inputs([], []).
process_user_inputs([Input|Rest], AllAdvice) :-
    findall(Advice,
            ( normalize_symptom(Input, Symptom),
              first_aid_with_disclaimer(Symptom, Advice)
            ),
            Advices),
    ( Advices = [] ->
        format(atom(NoAdvice), 'No first aid advice found for "~w". Please consult a doctor.', [Input]),
        UniqueAdvices = [NoAdvice]
    ; sort(Advices, UniqueAdvices)
    ),
    process_user_inputs(Rest, RestAdvice),
    append(UniqueAdvices, RestAdvice, AllAdvice).

% --- Find possible matching symptoms ---
find_possible_symptoms(Input, Matches) :-
    findall(Symptom, (
        symptom_alias(Symptom, Aliases),
        (member(Input, Aliases); Symptom = Input)
    ), Matches).
